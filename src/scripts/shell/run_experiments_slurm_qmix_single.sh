#!/bin/bash
FLAGS="--job-name=qmix_ --output=/dev/null --time=102:00:00 --ntasks=1 --gres=gpu:1 --error=logs/qmix.err --cpus-per-task=4"

#sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=2 n_steps=5 agent/model@model=attention_graph_decoder agent/mixer@mixer=qmixer_mha shared_reward=true semi_markov=true  train_steps=64 max_sequence_length=5 start_learning=16 add_other_agents_targets_to_resource=true add_x_y_position_of_resource=true add_route_positions=True batch_size=16 optimistic_in_violation=false update_target_every=5000
#sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=4 n_steps=5 agent/model@model=attention_graph_decoder agent/mixer@mixer=qmixer_mha shared_reward=true semi_markov=true  train_steps=64 max_sequence_length=5 start_learning=16 add_other_agents_targets_to_resource=true add_x_y_position_of_resource=true add_route_positions=True batch_size=16 optimistic_in_violation=false update_target_every=5000

#sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=2 n_steps=5 agent/model@model=grcn_shared_info agent/mixer@mixer=qmixer_mha shared_reward=true semi_markov=true  train_steps=64 max_sequence_length=5 start_learning=16 add_other_agents_targets_to_resource=true add_x_y_position_of_resource=true add_route_positions=True batch_size=16 observation=FullObservationAttention update_target_every=5000
#sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=4 n_steps=5 agent/model@model=grcn_shared_info agent/mixer@mixer=qmixer_mha shared_reward=true semi_markov=true  train_steps=64 max_sequence_length=5 start_learning=16 add_other_agents_targets_to_resource=true add_x_y_position_of_resource=true add_route_positions=True batch_size=16 observation=FullObservationAttention update_target_every=5000
sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix model_optimizer.lr=0.002
#sbatch $FLAGS /home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=4 n_steps=1 agent/model@model=grcn_shared_info agent/mixer@mixer=none shared_reward=false semi_markov=true train_every=1 train_steps=16 max_sequence_length=2 start_learning=16 add_other_agents_targets_to_resource=true add_x_y_position_of_resource=true add_route_positions=True batch_size=64 observation=FullObservationAttention update_target_every=500 special_experiment_name='id'


#grcn_agent_specific
#/home/wiss/strauss/mtop_python_env/python -u -O  /home/wiss/strauss/projects/mtop/src/main.py -m +experiment=qmix/qmix number_of_agents=4 n_steps=5 agent/model@model=attention_graph_decoder agent/mixer@mixer=qmixer_mha shared_reward=true semi_markov=true  train_steps=128 max_sequence_length=5 "epsilon_decay=0.000001" start_learning=16 add_other_agents_targets_to_resource=true batch_size=16 optimistic_in_violation=false